## Find Markers
This script is designed to run the [Seurat](http://satijalab.org/seurat/) functions FindMarkers and FindAllMarkers on the output of the [Seurat pipeline](../../seurat_pipeline). Below is a brief description of the script's input and output. [default_yaml.md](default_yaml.md) contains a YAML file with the default parameters for the script. [changelog.md](changelog.md) contains the changelog for the script.

### Input
The script accepts two command line arguments. The first is a path to the directory containing the data to be used. The script expects a Seurat object in this directory with the name `seurat.rds` as well as the data matrix for the Seurat object with the name `data.rds`. This is the same format as the bottom directory generated by the Seurat pipeline. If no parameters are provided, the script will look in the current directory.

The second parameter is a YAML format file that contains the parameters to be used by FindAllMarkers as well as some plotting parameters. If not all parameters are provided, default values will be used. If no second parameter is provided, the script will use the default values for each parameter. The default values can be seen in [default_yaml.md](default_yaml.md).

### Output
Depending on the values of the `ident.1` and `ident.2` parameters, the script will run either FindMarkers or FindAllMarkers. If both are set to `all`, then FindAllMarkers will be used. If these parameters are not provided, they default to `all`. If you wish to run FindMarkers, `ident.1` should be set to the cluster that you want to find markers for. `ident.2` can be set to `all` to compare `ident.1` against all other clusters or it can be set to a specific cluster or list of clusters to compare against.

The script will generate several output files in the provided path. Files will be overwritten when rerunning the script. In order to avoid this, you can use the `name` parameter to append a string to the files output by the script. This allows you to run the script multiple times with different names to avoid overwriting previously generated data. All the file names below assume that the `name` parameter is an empty string. If it is not, it is simply concatenated to each file name just before the file type.

The first is `markers.yml` which lists the input parameters used (including any that were set to the default values).

The file `markers.tsv` contains the results of FindMarkers or FindAllMarkers.

The file `tSNE_plots_markers.pdf` contains tSNE plots of the top markers for each cluster. The point size of the plots is controlled with the `pt.size` parameter. The number of plots is controlled by the `tsne.pages` and  `tsne.genes.per.page` parameters. `tsne.pages` controls how many pages should be generated and `tsne.genes.per.page` controls how many genes should be plotted per page. The script will only plot at most however many marker genes were detected in each cluster.

The file `dot_plots_markers.pdf` contains dot plots of the top markers for each cluster. The number of plots is controlled by the `dotplot.pages` and  `dotplot.genes.per.page` parameters. `dotplot.pages` controls how many pages should be generated and `dotplot.genes.per.page` controls how many genes should be plotted per page. The script will only plot at most however many marker genes were detected in each cluster.
